% CJE Playbook Style Package
\ProvidesPackage{style/cje}

% Core packages
\RequirePackage{amsmath, amssymb, amsthm}
\RequirePackage{graphicx}
\RequirePackage{hyperref}
\RequirePackage{xcolor}
\RequirePackage{listings}
\RequirePackage{booktabs}
\RequirePackage{fancyhdr}
\RequirePackage{geometry}
\RequirePackage{enumitem}

% Page geometry
\geometry{
  letterpaper,
  left=1in,
  right=1in,
  top=1in,
  bottom=1in
}

% Colors
\definecolor{cjeblue}{RGB}{0,102,204}
\definecolor{cjegray}{RGB}{128,128,128}
\definecolor{codebg}{RGB}{245,245,245}

% Hyperref setup
\hypersetup{
  colorlinks=true,
  linkcolor=cjeblue,
  citecolor=cjeblue,
  urlcolor=cjeblue,
  pdftitle={CJE Practitioners' Playbook},
  pdfauthor={Eddie Landesberg}
}

% Code listing style
\lstset{
  basicstyle=\ttfamily\small,
  backgroundcolor=\color{codebg},
  frame=single,
  breaklines=true,
  columns=flexible,
  keywordstyle=\color{cjeblue}\bfseries,
  commentstyle=\color{cjegray}\itshape,
  stringstyle=\color{red},
  showstringspaces=false,
  numbers=left,
  numberstyle=\tiny\color{cjegray},
  numbersep=8pt
}

% Custom environments
\newenvironment{recipe}{%
  \begin{mdframed}[
    linewidth=2pt,
    linecolor=cjeblue,
    backgroundcolor=codebg,
    roundcorner=5pt
  ]
  \textbf{Recipe:}
}{%
  \end{mdframed}
}

\newenvironment{quickref}{%
  \begin{mdframed}[
    linewidth=1pt,
    linecolor=black,
    backgroundcolor=white,
    roundcorner=3pt
  ]
  \textbf{Quick Reference:}
}{%
  \end{mdframed}
}

% Theorem-like environments
\theoremstyle{definition}
\newtheorem{assumption}{Assumption}
\newtheorem{diagnostic}{Diagnostic}

% Custom commands
\newcommand{\cje}{\texttt{CJE}}
\newcommand{\dm}{\text{DM}}
\newcommand{\ips}{\text{IPS}}
\newcommand{\dr}{\text{DR}}
\newcommand{\autocal}{\text{AutoCal-R}}
\newcommand{\simcal}{\text{SIMCal}}
\newcommand{\oua}{\text{OUA}}

% Estimator commands
\DeclareMathOperator{\E}{\mathbb{E}}
\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\SE}{SE}
\newcommand{\est}[1]{\widehat{#1}}

% Require mdframed for boxes
\RequirePackage{mdframed}
